<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>AutoPatchWorkMod</title>
    <link href='css/options.css' rel='stylesheet' type='text/css'>
    <script type='text/javascript' src='scripts/storage.js'></script>
    <script type='text/javascript' src='scripts/options.js'></script>
</head>
<body class='tabbox'>
    <ul class='tabs' id='menu-tabs'>
        <li id='menu-general' class='selected'>
            <a href='#general'><span class='MSG_general'>General</span></a>
        </li>
        <li id='menu-filters'>
            <a href='#filters'><span class='MSG_filters'>Filters</span></a>
        </li>
        <li id='menu-styles'>
            <a href='#styles'><span class='MSG_styles'>Styles</span></a>
        </li>
        <li id='menu-patterns'>
            <a href='#patterns'><span class='MSG_patterns'>Patterns</span></a>
        </li>
        <li id='menu-backup'>
            <a href='#backup'><span class='MSG_backup'>Backup</span></a>
        </li>
        <li id='menu-news'>
            <a href='#history'><span class='MSG_history'>History</span></a>
        </li>
        <li id='menu-about'>
            <a href='#about'><span class='MSG_about'>About</span></a>
        </li>
    </ul>
    <div id='base'>
        <div id='inner-container'>
            <section id='general' class='content'>
                <div class='btn-group main'>
                    <button id='open_siteinfo_manager' class='MSG_open_siteinfo_manager'>Editor</button>
                    <button id='update_siteinfo' class='MSG_update_siteinfo'>Update DB</button>
                    <button id='reload_db' class='MSG_reload_db'>Reload DB</button>
                    <button id='cleanup_db' class='MSG_cleanup_db'>Cleanup DB</button>
                </div>
                <div>
                    <input type='text' id='db_location'><button id='update_wedata_location'>Save</button>
                    <label for='db_location' class='MSG_wedata_location'>Mini DB URL</label>
                </div>
                <div>
                    <input type='text' id='full_db_location'><button id='update_wedata_full_location'>Save</button>
                    <label for='full_db_location' class='MSG_wedata_full_location'>Full DB URL</label>
                </div>
                <div>
                    <input type='checkbox' id='auto_start'>
                    <label for='auto_start' class='MSG_auto_start'>Autostart extension</label>
                </div>
                <div>
                    <input type='checkbox' id='bar_status'>
                    <label for='bar_status' class='MSG_bottom_bar'>Enable inpage status bar</label>
                </div>
                <div>
                    <input type='checkbox' id='disable_in_frames'>
                    <label for='disable_in_frames' class='MSG_noiframe'>Disable extension in frames</label>
                </div>
                <div>
                    <input type='checkbox' id='target_blank'>
                    <label for='target_blank' class='MSG_open_newtab'>Open new tabs from links in added pages</label>
                </div>
                <div>
                    <input type='checkbox' id='force_abs_hrefs'>
                    <label for='force_abs_hrefs' class='MSG_force_abs_hrefs'>Force absolute URLs for links in added pages</label>
                </div>
                <div>
                    <input type='checkbox' id='force_abs_srcs'>
                    <label for='force_abs_srcs' class='MSG_force_abs_srcs'>Force absolute URLs for images in added pages</label>
                </div>
                <div>
                    <input type='checkbox' id='check_crc'>
                    <label for='check_crc' class='MSG_check_crc'>Check pages for duplicates by CRC</label>
                </div>
                <div>
                    <input type='checkbox' id='change_address'>
                    <label for='change_address' class='MSG_change_address'>Update location URL and title on scroll</label>
                </div>
                <div>
                    <span class='mins'>0</span>
                    <input type='range' id='remaining_height' max='4000' min='0' step='10'>
                    <span class='maxs'>4000</span>
                </div>
                <div class='outputs'>
                    <label for='remaining_height' class='MSG_remaining_height'>Pixels before next page</label>
                    <span class='outputs' id='remaining_height_value'></span>
                </div>
                <div>
                    <input type='checkbox' id='debug_mode'>
                    <label for='debug_mode' class='MSG_debugmode'>Debug output</label>
                </div>
            </section>
            <section id='filters' class='content' style='visibility: hidden; height: 100px'>
                <div class='MSG_exclude_filter'>
                    URL filters:
                </div>
                <ul id='filter_list'></ul>
                <select id='filter_type'>
                    <option class='MSG_filter_prefix' value='prefix'>prefix</option>
                    <option class='MSG_filter_domain' value='domain'>domain</option>
                    <option class='MSG_filter_regexp' value='regexp'>regexp</option>
                </select>
                <input type='text' id='filter_text' value=''>
                <button id='add_filter' class='MSG_add'>
                    Add
                </button>
            </section>
            <section id='styles' class='content' style='visibility: hidden; height: 100px'>
                <div class='MSG_separator_style'>
                    Page separator and statusbar styles:
                </div>
                <textarea id='css_text' spellcheck='false'></textarea>
                <div class='buttons'>
                    <button id='apply_css' class='MSG_save'>
                        Save
                    </button>
                </div>
                <div class='buttons'>
                    <button id='reset_css' class='MSG_reset'>
                        Reset
                    </button>
                </div>
            </section>
            <section id='custompatterns' class='content' style='visibility: hidden; height: 100px'>
                <div class='MSG_siteinfo_patterns'>
                    Custom SITEINFO patterns:
                </div>
                <textarea id='custom_patterns' spellcheck='false'></textarea>
                <div class='buttons'>
                    <button id='apply_custom_patterns' class='MSG_save'>
                        Save
                    </button>
                </div>
                <div class='buttons'>
                    <button id='reset_custom_patterns' class='MSG_reset'>
                        Reset
                    </button>
                </div>
            </section>
            <section id='backup' class='content' style='visibility: hidden; height: 100px'>
                <div class='MSG_backup_preferences'>
                    Backup preferences:
                </div>
                <textarea id='backup_field' spellcheck='false'></textarea>
                <div class='buttons'>
                    <button id='save_backup' class='MSG_save'>
                        Save
                    </button>
                </div>
                <div class='buttons'>
                    <button id='reset_backup' class='MSG_reset'>
                        Reset
                    </button>
                </div>
            </section>
            <section id='news' class='content' style='visibility: hidden; height: 100px'>
                <h4>Version 1.9.7</h4>
                <ul>
                    <li>
                        Autostart option.
                    </li>
                    <li>
                        Links target rewriting option.
                    </li>
                    <li>
                        Site filters by regexps, prefixes and domains.
                    </li>
                    <li>
                        SITEINFO updater and manager.
                    </li>
                    <li>
                        Instant search, editing and disabling of rules and internal auto-pagerizing in SITEINFO manager.
                    </li>
                    <li>
                        Option to disable extension in IFRAMEs.
                    </li>
                    <li>
                        Custom CSS for extension's page separator and statusbar.
                    </li>
                    <li>
                        Custom SITEINFO patterns in JSON format.
                    </li>
                    <li>
                        Option to update location's URL on scroll.
                    </li>
                    <li>
                        Option to change how many pixels left before adding next page.
                    </li>
                    <li>
                        Debug output support.
                    </li>
                    <li>
                        Status bar: loading animation, toggle auto-pagerizing (TGL), show SITEINFO manager (SIM) or options page (OPT).
                    </li>
                </ul>
                <h4>Version 1.9.8</h4>
                <ul>
                    <li>
                        Opera 15 support.
                    </li>
                    <li>
                        Following local SITEINFO fields were added:
                        <ul><li><i>nextMask</i> - allows nuber auto-increments in next page address.</li>
                                <li><i>pageElementSelector</i> - allows next link search by selector.</li>
                                <li><i>nextLinkSelector</i> - allows content search by selector.</li>
                                <li><i>forceIframe</i> - pages loaded through temporary IFrame instead of XHR.</li>
                                <li><i>disableSeparator</i> - disables page separator between added pages.</li>
                                <li><i>forceAddressChange</i> - dinamically updates location URL.</li>
                                <li><i>allowScripts</i> - allows scripts inside content block of new pages.</i>
                        </ul>
                    </li>
                    <li>
                        Event properties accessible via <i>detail</i> property of <i>CustomEvent</i>-type events.
                    </li>
                    <li>
                        <i>detail.link</i> property of <i>AutoPatchWork.request</i> event contains element (Node type) with reference to the next page. <i>detail.norequest</i> property (Boolean type) defines whether to download page referenced in previous property (false to return blank page template).
                    </li>
                    <li>
                        Next page can be additionally pre-processed in <i>AutoPatchWork.load</i> event as it is available from <i>detail.htmlDoc</i> (HTMLDocument type) property of this event.
                    </li>
                    <li>
                        CSS selector/XPath auto-recognition for standard SITEINFO fields.
                    </li>
                    <li>
                        Events are targeted to <i>document</i> instead of <i>window</i>.
                    </li>
                </ul>
               <h4>Version 1.9.9</h4>
                <ul>
                    <li>
                        Firefox 48 and Chrome 49 support.
                    </li>
                    <li>
                         In <i>AutoPatchWork.load</i> event loaded page's URL available through <i>detail.url</i> property.
                    </li>
                    <li>
                         <i>AutoPatchWork.append</i> event now contains <i>detail.nodes</i> and <i>detail.title</i> where first contains elements defined by <i>pageElement[Selector]</i> field and the latter title of added page.
                    </li>
                    <li>
                        <i>forceAddressChange</i> field enables updating of both location URL and page title.
                    </li>
                    <li>
                        <i>insertBefore</i> field can be set to empty in SITEINFO manager to override value from remote database.
                    </li>
                    <li>
                        Per site <i>forceAddressChange</i> (<i>address</i> checkbox) inverts global setting.
                    </li>
                    <li>
                        Following local SITEINFO fields were added:
                        <ul><li><i>removeElement[Selector]</i> - removes elements from current and added pages.</li><li> <i>jsPatch</i> - allows per site JavaScript patching.</li><li><i>cssPatch</i> - allows per site CSS patching.</li></ul>
                    </li>
                    <li>
                        Options in SITEINFO manager to disable separators, allow scripts, load pages via IFrames and update URL/title on scroll.
                    </li>
                    <li>
                        Options to make link <i>href</i>s and image <i>src</i>s absolute in added pages.
                    </li>
                    <li>
                        SITEINFO database URL can now be changed in case remote database becomes inaccessible.
                    </li>
                    <li>
                        SITEINFO database can be reloaded manually.
                    </li>
                    <li>
                        SITEINFO database can be cleaned from all unused entries that have no successful hits until next update. 
                    </li>
                    <li>
                        Various bugfixes.
                    </li>
                </ul>
            <br />
            </section>
            <section id='about' class='content' style='visibility: hidden; height: 100px'>
                <dl>
                    <dt class='MSG_extension_name'>
                        Name:
                    </dt>
                    <dd>
                        AutoPatchWork Mod
                    </dd>
                    <dt class='MSG_author_name'>
                        Author:
                    </dt>
                    <dd>
                        <a href='https://github.com/Dither' target='_blank'>Dither</a>
                    </dd>
                    <dt class='MSG_thank_you'>
                        Thanks:
                    </dt>
                    <dd>
                        <a href='http://ss-o.net/' target='_blank'>os0x</a>
                    </dd>
                    <dd>
                        <a href='http://autopagerize.net/' target='_blank'>AutoPagerize</a>
                    </dd>
                    <dt class='MSG_license'>
                        License:
                    </dt>
                    <dd>
                        <a href='http://creativecommons.org/licenses/MIT/' target='_blank'>The MIT license</a>
                    </dd>
                </dl>
            </section>
        </div>
    </div>
    <!--base-->
</body>
</html>